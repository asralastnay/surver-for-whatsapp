# استخدام أحدث نسخة من WAHA
FROM devlikeapro/waha:latest

# ----------------------------------------------------------------
# 1. إعدادات المحرك (الحل الجذري لمشكلة الذاكرة)
# ----------------------------------------------------------------
# التوثيق يقول: NOWEB لا يحتاج متصفح كروم، وهذا يوفر الذاكرة ويمنع الانهيار
ENV WHATSAPP_DEFAULT_ENGINE=WEBJS

ENV PUPPETEER_EXECUTABLE_PATH=/usr/bin/google-chrome-stable
# ----------------------------------------------------------------
# 2. تثبيت المفاتيح وكلمات المرور (عشان ما تتغير عليك أبداً)
# ----------------------------------------------------------------
# مفتاح الـ API للربط (وحدناه على 123456)
ENV WAHA_API_KEY=123456

# بيانات الدخول للوحة التحكم (Dashboard)
ENV WAHA_DASHBOARD_USERNAME=admin
ENV WAHA_DASHBOARD_PASSWORD=123456

# ----------------------------------------------------------------
# 3. إعدادات إضافية من التوثيق الرسمي
# ----------------------------------------------------------------
# طباعة الباركود في اللوج (احتياط لو الموقع علق)
ENV WAHA_PRINT_QR=True

# تعطيل التطبيقات الإضافية لتوفير الذاكرة
ENV WAHA_APPS_ENABLED=False

# تحديد المنفذ الصحيح لـ Render
ENV PORT=3000
EXPOSE 3000
