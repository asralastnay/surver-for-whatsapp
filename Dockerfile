# نستخدم النسخة الرسمية المستقرة من Evolution API (الإصدار 2)
# هذا النظام مبني على Baileys (خفيف جداً ولا يحتاج متصفح)
FROM attotech/evolution-api:v2.1.1

# ----------------------------------------------------------------
# 1. إعدادات السيرفر
# ----------------------------------------------------------------
# تحديد المنفذ (Render يحب المنفذ 8080 أو 10000 غالباً)
ENV SERVER_PORT=8080

# نوع السيرفر (نخبره أننا نستخدمه كـ API)
ENV SERVER_TYPE=http

# ----------------------------------------------------------------
# 2. إعدادات الأمان والمفاتيح
# ----------------------------------------------------------------
# مفتاح API الخاص بك (وحدناه على 12345 لتسهيل الربط)
# هذا المفتاح ستستخدمه في كود البايثون
ENV AUTHENTICATION_API_KEY=12345

# ----------------------------------------------------------------
# 3. إعدادات الويب هوك (Webhook)
# ----------------------------------------------------------------
# هنا نضع رابط بوت البايثون الخاص بك لكي يرسل له الرسائل تلقائياً
# (استبدل الرابط برابط بوتك الحقيقي إذا كان مختلفاً)
ENV WEBHOOK_GLOBAL_ENABLED=true
ENV WEBHOOK_GLOBAL_URL=https://whatsapp-bot-jh7d.onrender.com/webhook
# نريد استقبال الرسائل الجديدة فقط
ENV WEBHOOK_EVENTS_MESSAGE_UPSERT=true

# ----------------------------------------------------------------
# 4. إعدادات الذاكرة والأداء
# ----------------------------------------------------------------
# تعطيل التخزين المحلي لأنه لا يفيد في راندر (سنستخدم قاعدة بيانات)
ENV STORE_MESSAGES=false
ENV STORE_CONTACTS=false
ENV STORE_CHATS=false

# فتح المنفذ
EXPOSE 8080
